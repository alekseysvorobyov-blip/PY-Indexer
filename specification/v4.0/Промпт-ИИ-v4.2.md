## üéØ **–ö–û–ú–ü–ê–ö–¢–ù–´–ô –ü–†–û–ú–ü–¢ –î–õ–Ø –ò–ò:**

```
# –ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ TECH-–ò–ù–î–ï–ö–°–´ –î–õ–Ø –ë–ï–ó–û–ü–ê–°–ù–û–ì–û –ò–ó–ú–ï–ù–ï–ù–ò–Ø –ö–û–î–ê

## –ë–ê–ó–û–í–´–ô –ê–õ–ì–û–†–ò–¢–ú:

1. **–ó–ê–ì–†–£–ó–ò –ò–ù–î–ï–ö–°–´**:
   - TECH-MAP ‚Üí –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫
   - TECH-INDEX ‚Üí –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞  
   - TECH-LOCATION ‚Üí –≥—Ä–∞–Ω–∏—Ü—ã —Å—É—â–Ω–æ—Å—Ç–µ–π

2. **–ù–ê–ô–î–ò –°–£–©–ù–û–°–¢–¨** —á–µ—Ä–µ–∑ TECH-MAP:
   - –ü–æ –∏–º–µ–Ω–∏: `indexes.by_name["run"]` ‚Üí [location_id]
   - –ü–æ —Ñ–∞–π–ª—É: `indexes.by_file["cli_index.py"]` ‚Üí [location_ids]
   - –ü–æ —Ç–∏–ø—É: `indexes.by_type.function` ‚Üí [location_ids]

3. **–ü–û–õ–£–ß–ò –ö–û–ù–¢–ï–ö–°–¢** —á–µ—Ä–µ–∑ TECH-INDEX + TECH-LOCATION:
   - –ì—Ä–∞–Ω–∏—Ü—ã: `location[5]` ‚Üí [parent_id, file_idx, line_start, line_end, type]
   - –°–∏–≥–Ω–∞—Ç—É—Ä–∞: `signatures.functions[5]` ‚Üí [return_type_idx, params_pool_idx]
   - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `call_graph["5"]` ‚Üí [callee_location_ids]
   - –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ: `class_info["2"]` ‚Üí {bases, mro, methods}

4. **–ò–ó–ú–ï–ù–ò –ö–û–î** —á–µ—Ä–µ–∑ execute_python:
   - –£–∫–∞–∂–∏ —Ç–æ—á–Ω—ã–π location_id
   - –ù–µ –≤—ã—Ö–æ–¥–∏ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã line_start-line_end
   - –°–æ—Ö—Ä–∞–Ω–∏ —Å–∏–≥–Ω–∞—Ç—É—Ä—É –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

5. **–ü–†–û–í–ï–†–¨ –°–û–û–¢–í–ï–¢–°–¢–í–ò–ï**:
   - –ù–µ—Ç –ª–∏ —Ä–∞–∑—Ä—ã–≤–∞ call_graph?
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –ª–∏ –∏–µ—Ä–∞—Ä—Ö–∏—è?
   - –°–æ–≤–º–µ—Å—Ç–∏–º—ã –ª–∏ —Ç–∏–ø—ã?

## –ü–†–ê–ö–¢–ò–ß–ï–°–ö–ò–ï –ü–†–ò–ú–ï–†–´:

### üîß –ò–∑–º–µ–Ω–∏—Ç—å –º–µ—Ç–æ–¥:
```python
# 1. –ù–∞–π–¥–∏ –º–µ—Ç–æ–¥
method_id = tech_map.indexes.by_name["run"][0]

# 2. –ü–æ–ª—É—á–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç  
location = tech_location.locations[method_id]  # [5, 2, 0, 58, 122, 3]
signature = tech_index.signatures.functions[method_id]  # [36, 0]
dependencies = tech_index.call_graph[str(method_id)]  # [16, 17, 18]

# 3. –ò–∑–º–µ–Ω–∏ –∫–æ–¥
execute_python(
    action="modify_function",
    location_id=method_id,
    new_code="def run(self, args): ...",  # –Ω–æ–≤—ã–π –∫–æ–¥
    preserve_signature=True
)
```

### üèóÔ∏è –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ –≤ –∫–ª–∞—Å—Å:
```python
# 1. –ù–∞–π–¥–∏ –∫–ª–∞—Å—Å
class_id = tech_map.indexes.by_name["IndexCLI"][0]

# 2. –ü—Ä–æ–≤–µ—Ä—å –≥—Ä–∞–Ω–∏—Ü—ã –∫–ª–∞—Å—Å–∞
class_location = tech_location.locations[class_id]  # [2, 0, 0, 34, 154, 2]
class_info = tech_index.class_info[str(class_id)]  # {methods: [5,6,7]}

# 3. –î–æ–±–∞–≤—å –º–µ—Ç–æ–¥ –≤ –∫–æ–Ω–µ—Ü –∫–ª–∞—Å—Å–∞
execute_python(
    action="add_method", 
    parent_location_id=class_id,
    new_code="def new_method(self): ...",
    insert_position="end"
)
```

### üîó –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:
```python
# 1. –ù–∞–π–¥–∏ –≤—Å–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏
function_id = tech_map.indexes.by_name["parse_arguments"][0]
used_by = tech_index.call_graph.get(str(function_id), [])

# 2. –ü—Ä–æ–≤–µ—Ä—å, –º–æ–∂–Ω–æ –ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å —Å–∏–≥–Ω–∞—Ç—É—Ä—É
if len(used_by) > 0:
    # –ï—Å—Ç—å –∑–∞–≤–∏—Å–∏–º—ã–µ –≤—ã–∑–æ–≤—ã - –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –∏—Ö —Ç–æ–∂–µ
    for caller_id in used_by:
        update_caller_signature(caller_id)

# 3. –ò–∑–º–µ–Ω–∏ —Ñ—É–Ω–∫—Ü–∏—é
execute_python(...)
```

## üö® –ß–¢–û –ù–ï –î–ï–õ–ê–¢–¨:

### ‚ùå –ù–ï –í–´–•–û–î–ò –ó–ê –ì–†–ê–ù–ò–¶–´:
```python
# –ü–ª–æ—Ö–æ: –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã –º–µ—Ç–æ–¥–∞
location = [5, 2, 0, 58, 122, 3]  # —Å—Ç—Ä–æ–∫–∏ 58-122
execute_python("modify_function", location_id=5, new_code="..." * 200)
```

### ‚ùå –ù–ï –ù–ê–†–£–®–ê–ô –°–ò–ì–ù–ê–¢–£–†–£:
```python
# –ü–ª–æ—Ö–æ: –º–µ–Ω—è–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π —Ç–∏–ø
old_sig = [36, 0]  # return_type_idx=36 ‚Üí "int"
execute_python("modify_function", new_code="def run(self): return 'string'")
```

### ‚ùå –ù–ï –ò–ì–ù–û–†–ò–†–£–ô –ù–ê–°–õ–ï–î–û–í–ê–ù–ò–ï:
```python
# –ü–ª–æ—Ö–æ: –ª–æ–º–∞–µ—Ç –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º
class_info = {"bases": [50], "mro": [2, 50]}  # –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç location_id=50
execute_python("modify_method", break_polymorphism=True)
```

## ‚úÖ –ß–¢–û –î–ï–õ–ê–¢–¨:

### ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ô location_id –î–õ–Ø –¢–û–ß–ù–û–°–¢–ò
### ‚úÖ –ü–†–û–í–ï–†–Ø–ô call_graph –ü–ï–†–ï–î –ò–ó–ú–ï–ù–ï–ù–ò–ï–ú  
### ‚úÖ –°–û–ë–õ–Æ–î–ê–ô –ì–†–ê–ù–ò–¶–´ –ò–ó TECH-LOCATION
### ‚úÖ –û–ë–ù–û–í–õ–Ø–ô –í–°–ï –ó–ê–í–ò–°–ò–ú–û–°–¢–ò

**–ò—Ç–æ–≥:** –ò–Ω–¥–µ–∫—Å—ã –¥–∞—é—Ç –ø–æ–ª–Ω—É—é –∫–∞—Ä—Ç—É –ø—Ä–æ–µ–∫—Ç–∞. –ò—Å–ø–æ–ª—å–∑—É–π –∏—Ö –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∏ —Ç–æ—á–Ω–æ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –±–µ–∑ "—Ñ–∞–Ω—Ç–∞–∑–∏—Ä–æ–≤–∞–Ω–∏—è".
```